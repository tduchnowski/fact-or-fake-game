@page "/"
@inject NavigationManager Navigation
@using TrueFalseWebApp.Models
@using TrueFalseWebApp.Shared
@inject TelegramInitData TelegramInitData
@using MudBlazor

<MudContainer Class="d-flex align-center justify-center" Style="height: 100vh; width: 100vw;">
    <MudStack Class="align-center">
        @* <MudText Typo="Typo.h3" Class="mb-4">@initData</MudText> *@
        <MudButton Variant="Variant.Filled" Class="mud-theme-primary" FullWidth="true" OnClick="StartSoloGame">
            Play Solo
        </MudButton>
        <MudButton Variant="Variant.Filled" Class="mud-theme-primary" FullWidth="true" OnClick="StartMultiplayerGame">
            Play With Friends
        </MudButton>
    </MudStack>
</MudContainer>

@code {
    protected override async Task OnInitializedAsync()
    {
        WebAppInitDataUnsafe? initDataUnsafe = TelegramInitData.InitDataUnsafe;
        string? startParam = initDataUnsafe?.StartParam;
        if (!string.IsNullOrEmpty(startParam))
        {
            Navigation.NavigateTo($"/multiplayer/{startParam}");
            TelegramInitData.ResetStartParam();
        }
        await Task.CompletedTask;
    }

    private void StartSoloGame()
    {
        Navigation.NavigateTo("solo");
    }

    private void StartMultiplayerGame()
    {
        Navigation.NavigateTo("multiplayer");
    }
}